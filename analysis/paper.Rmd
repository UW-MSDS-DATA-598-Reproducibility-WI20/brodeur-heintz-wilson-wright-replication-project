---
title: "[Re] Marriage and happiness: Providing evidence against a relationship between inequality and happiness in Oishi, Kesebir, and Diener (2011)"
author: "Lauren Heintz, Tara Wilson, Ben Mathieu, Will Wright"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: bookdown::word_document2
bibliography: bibliography.bibtex
link-citations: yes

---

``` {r setup, echo = FALSE, message = FALSE, warnings = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  warning = FALSE,
  message = FALSE,
  echo = FALSE,
  comment = "#>",
  fig.path = "../figures")
#knitr::read_chunk("src/my-external-code.R")

# load packages
library(tidyverse)
library(gssr)
```

```{r get_data, echo = FALSE}
# ==== Get Data
# The happiness, race, and marital data comes from the gssr package and not the provided data since the provided version
  # does not have race or marital status. For more information, go to https://kjhealy.github.io/gssr/
data(gss_all)

# The Gini indices come from the provided dataset
gini <-  read.csv("../data/Gini_families.csv") %>%
  select(year = Year, gini = Total)

# ==== Clean data
# Subset the GSS data to just the relevant fields
gss <- gss_all %>%
  select(year, happy, race, marital) %>%
  mutate(year = as.integer(year), # fix data class
         happy = as.integer(happy),
         happy = recode(happy, `1`= 3, `2` = 2, `3` = 1), # reverse the values such that higher is more happy
         race = as.integer(race),
         marital = as.integer(marital)) %>%
  na.omit() # remove NAs (4780/64,814 cases where not all data was collected)
  
# join the gini and happiness/race/marital data
happy <- gini %>%
  left_join(gss, by = c("year" = "year")) %>%
  na.omit()


# create summary table by year
happy_race_summary <- happy %>%
  group_by(year, race) %>%
  summarize(happy_avg = mean(happy))

# write a function 

```

```{r plots}
g <- ggplot(happy_race_summary, aes(x = year, y = happy_avg, color = factor(race)))
g + geom_point() +
  geom_line(stat = "smooth",
            method = "lm", 
            se = FALSE, 
            alpha = 0.5) +
  theme_bw() +
  labs(title = "Figure 3",
       x = "Year",
       y = "Mean Happiness",
       caption = "Figure 3") +
  scale_color_discrete(name="Race",
                      breaks=c(1, 2, 3),
                      labels=c("White", "Black", "Other")) +
  scale_y_continuous(limits = c(1.9,2.5))


```


A reference implementation of:

> Grunberg, Rebecca L., Hyejun Kim, and Minjae Kim. 2014a. “Marriage and Happiness Grunberg Kim Kim.pdf.” Harvard Dataverse. https://doi.org/10.7910/DVN/25655/MB980L

Which is a reference implementation of:

> Oishi, S., Kesebir, S., & Diener, E. (2011). Income Inequality and Happiness. Psychological Science, 22(9), 1095–1100. https://doi.org/10.1177/0956797611417262



# Introduction



# Methods

The paper of interest[@data] used linear models to show that the correlations drawn by the original findings[@incomeinequality] do not have an effect on the response variable, happiness, by factoring in interactions of variables known correlated variables.

In this replication paper, three artifacts from the original paper[@data] were reproduced. The first artifact is "figure 2 (ADD FIGURE 2)..." which plots the mean happiness by year and race. The second artifact is table1 which shows the linear regression model's coefficients. The third artifact is table2 which shows the muliti correlation coefficients.

## Dataset

Marriage and Happiness[@data], obtained data from the General Social Survey (GSS) and the US Census Bureau. The subset of GSS data provided omitted the RACE and MARITAL columns crucial to the replication of the figures and models. 

In order to complete the missing data, the original dataset was queried directly using the gssr [add reference here?] R package. This new dataset was then merged with the unchanged US Census Bureau data found in gini_..csv.

## Replicating Figure 2 - [INSER FULL FIGURE NAME HERE]

The original R code used the standard R libaries for visualizations. The da

```{r, echo = FALSE}

myfunction <- function(arg1, arg2){
  print(seq(arg2))
  print("hello world")
}

myfunction(32,44)

```


## Replicating Table 1


## Replicating Table 2


# Results

We obtained ...

```{r, table1, fig.cap="Table 1 from the original paper", echo=FALSE}
knitr::include_graphics("original_paper_table_1.png")
```

The results from Table 1 in the original paper are shown in Figure \@ref(fig:table1).

```{r, table2, fig.cap="Table 2 from the original paper", echo=FALSE}
knitr::include_graphics("original_paper_table_2.png")
```

The results from Table 2 in the original paper are shown in Figure \@ref(fig:table2).


# Conclusion

Replication of this paper was utlimately contingent on tracing back the original dataset. Without this resource being cited and publically available, it would not have been possible to replicate the different tables and figure presented in the original paper.

# References Cited

Reference 1: @marriagehappiness  
Reference 2: @data
Reference 3: @incomeinequality

---

